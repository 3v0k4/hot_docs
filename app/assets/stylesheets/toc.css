:root {
  --sidetoc-link-color: var(--link-color);
  --sidetoc-link-active-color: var(--link-active-color);
  --toc-background-color: #e9e9e9;
  --toc-divider-color: #b0b0b0;
  --toc-link-active-color: black;
  --toc-link-color: #606060;
}

[data-theme=dark]:root {
  --sidetoc-link-color: var(--link-color);
  --sidetoc-link-active-color: var(--link-active-color);
  --toc-background-color: #444444;
  --toc-divider-color: #909090;
  --toc-link-active-color: white;
  --toc-link-color: #c0c0c0;
}

.toc {
  background-color: var(--toc-background-color);
  border-radius: 5px;
  cursor: pointer;
  margin-bottom: 1rem;
  user-select: none;

  @media (min-width: 64rem) {
    display: none;
  }

  &::details-content {
    height: 0;
    overflow: hidden;
    transition-property: height, content-visibility;
    transition-duration: 0.5s;
    transition-behavior: allow-discrete;
  }

  &[open]::details-content {
    height: auto;
    /* On supported browsers, allow transition to height: auto; */
    height: calc-size(auto, size);
  }
}

.toc__label {
  padding: 0.3rem 0.6rem;
}

.toc__entries {
  border-top: 1px solid var(--toc-divider-color);
  display: flex;
  flex-direction: column;
  font-size: 0.9rem;
  padding: 0.5rem 0.6rem;
  gap: 0.2rem;
}

.toc__link {
  color: var(--toc-link-color);
  display: inline-block;

  &.h2 {
    margin-left: 1rem;
  }

  &.h3 {
    margin-left: 2rem;
  }

  &.h4 {
    margin-left: 3rem;
  }

  &.h5 {
    margin-left: 4rem;
  }

  &.h6 {
    margin-left: 5rem;
  }

  &.active {
    color: var(--toc-link-active-color);
  }

  &:hover {
    color: var(--toc-link-active-color);
  }
}

.sidetoc {
  display: none;
  flex: 0 0 25%;
  max-width: 25%;

  @media (min-width: 64rem) {
    display: initial;
  }
}

.sidetoc__entries {
  border-left: 1px solid var(--column-border-color);
  display: flex;
  flex-direction: column;
  font-size: 0.9rem;
  gap: 0.4rem;
  padding: 0 1.5rem;
  position: sticky;
  top: calc(var(--nav-height) + 0.5rem + 0.375rem); /* Align with menu */
}

.sidetoc__link {
  color: var(--sidetoc-link-color);
  display: inline-block;

  &.h2 {
    margin-left: 1rem;
  }

  &.h3 {
    margin-left: 2rem;
  }

  &.h4 {
    margin-left: 3rem;
  }

  &.h5 {
    margin-left: 4rem;
  }

  &.h6 {
    margin-left: 5rem;
  }

  &.active {
    color: var(--sidetoc-link-active-color);
  }

  &:hover {
    color: var(--sidetoc-link-active-color);
  }
}
