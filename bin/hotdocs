#!/bin/usr/env bash

set -euxo pipefail

curl -o app/assets/stylesheets/hotdocs.css https://raw.githubusercontent.com/3v0k4/hot-docs/refs/heads/main/app/assets/stylesheets/hotdocs.css

curl -o app/javascript/controllers/accordion_controller.js https://raw.githubusercontent.com/3v0k4/hot-docs/refs/heads/main/app/javascript/controllers/accordion_controller.js
curl -o app/javascript/controllers/sidenav_controller.js https://raw.githubusercontent.com/3v0k4/hot-docs/refs/heads/main/app/javascript/controllers/sidenav_controller.js
curl -o app/javascript/controllers/toc_controller.js https://raw.githubusercontent.com/3v0k4/hot-docs/refs/heads/main/app/javascript/controllers/toc_controller.js

curl -o app/helpers/hotdocs_helper.rb https://raw.githubusercontent.com/3v0k4/hot-docs/refs/heads/main/app/helpers/hotdocs_helper.rb

mkdir app/views/hotdocs/

curl -o app/views/hotdocs/_menu_row.html.erb https://raw.githubusercontent.com/3v0k4/hot-docs/refs/heads/main/app/views/hotdocs/_menu_row.html.erb

curl -o app/assets/layouts/hotdocs.html.erb https://raw.githubusercontent.com/3v0k4/hot-docs/refs/heads/main/app/assets/layouts/hotdocs.html.erb

bin/rails generate controller hotdocs page

echo "Make sure the HotDocs controller uses the correct layout:"
echo "class HotDocsController < ApplicationController\n  layout "hotdocs"
echo "\n"
echo "Throw some html into app/views/hotdocs/page.html.erb"
echo "\n"
echo "Visit http://127.0.0.1:3000/hotdocs/page"
